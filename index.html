<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        // Single redirect handler (prevents loops)
        (function(){
            const validPaths = ['/', '/commission-info', '/editing-portfolio'];
            const currentPath = window.location.pathname;
            
            if(!validPaths.includes(currentPath) && sessionStorage.redirect !== 'handled') {
                sessionStorage.redirect = currentPath;
                window.location.replace('/');
            }
            else if(sessionStorage.redirect) {
                const redirectPath = sessionStorage.redirect;
                sessionStorage.removeItem('redirect');
                if(validPaths.includes(redirectPath)) {
                    window.history.replaceState({}, '', redirectPath);
                }
            }
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bee's Editing Services</title>
    <style>
        :root {
            --dark-grey: #2D2D2D;
            --pastel-yellow: #FFED99;
            --accent: #FFF5CC;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--dark-grey);
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-button {
            background-color: var(--pastel-yellow);
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .tab-button.hidden-tab {
            display: none;
        }

        .tab-button:hover {
            transform: translateY(-2px);
        }

        .content-box {
            background-color: var(--pastel-yellow);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .hidden-content {
            display: none;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        a {
            color: #0066CC;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="tabs">
            <button class="tab-button" data-target="welcome">Welcome!</button>
            <button class="tab-button" data-target="commission">Commission Info</button>
            <button id="portfolioTab" class="tab-button hidden-tab" data-target="portfolio">Editing Portfolio</button>
        </div>

        <!-- Content Sections -->
        <div id="welcome" class="content-box fade-in">
            <div class="portfolio-section">
                <h2>Hi, I'm Bee!</h2>
                <p>I've been editing for <strong>almost six years</strong>. I use <strong>Premiere Pro</strong>, and I'm available <strong>24/7</strong> (as long as I'm not busy with IRL or homework). Feel free to commission me by adding me on Discord <strong>@beemilkz</strong>, or join my <a href="http://discord.gg/vRRCMH3KGy" target="_blank">friend's Discord server</a>, where you can commission me and others!</p>
                <p>My editing style is <strong>versatile</strong> and can be <strong>tailored</strong> to whatever you want/need. More time-consuming or complex styles <strong><u>may</u></strong> cost more.</p>
            </div>
        </div>

        <div id="commission" class="content-box hidden-content">
            <!-- Commission Info Content -->
        </div>

        <div id="portfolio" class="content-box hidden-content">
            <h2>Editing Portfolio</h2>
            <p>Coming soon! Check back later for my full portfolio.</p>
        </div>
    </div>

    <script>
        // Initialization
        const tabs = {
            welcome: document.getElementById('welcome'),
            commission: document.getElementById('commission'),
            portfolio: document.getElementById('portfolio')
        };

        const tabButtons = document.querySelectorAll('.tab-button');
        const portfolioTabButton = document.getElementById('portfolioTab');

        // Show initial content based on URL
        const initialPath = window.location.pathname;
        let currentTab = 'welcome';

        if(initialPath === '/commission-info') {
            showTab('commission');
        } else if(initialPath === '/editing-portfolio') {
            unlockPortfolio();
            showTab('portfolio');
        }

        // Tab click handlers
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const target = button.dataset.target;
                showTab(target);
                history.pushState({ tab: target }, '', target === 'welcome' ? '/' : `/${target}`);
            });
        });

        function showTab(tabId) {
            // Hide all tabs
            Object.values(tabs).forEach(tab => {
                tab.classList.add('hidden-content');
                tab.classList.remove('fade-in');
            });

            // Show selected tab
            const targetTab = tabs[tabId];
            targetTab.classList.remove('hidden-content');
            
            // Add fade-in animation if first view
            if(!targetTab.dataset.viewed) {
                targetTab.classList.add('fade-in');
                targetTab.dataset.viewed = true;
            }

            currentTab = tabId;
        }

        function unlockPortfolio() {
            portfolioTabButton.classList.remove('hidden-tab');
            sessionStorage.setItem('portfolioUnlocked', 'true');
        }

        // Handle browser navigation
        window.addEventListener('popstate', (event) => {
            if(event.state?.tab) {
                showTab(event.state.tab);
            }
        });

        // Check for unlocked portfolio
        if(sessionStorage.getItem('portfolioUnlocked')) {
            unlockPortfolio();
        }
    </script>
</body>
</html>